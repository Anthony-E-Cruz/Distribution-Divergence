date,close,open
1-May-12,68.13,34.12
30-Apr-12,63.98,45.56
27-Apr-12,67.00,67.89
26-Apr-12,89.70,78.54
25-Apr-12,99.00,89.23
24-Apr-12,130.28,99.23
23-Apr-12,166.70,101.34
20-Apr-12,234.98,122.34
19-Apr-12,345.44,134.56
18-Apr-12,443.34,160.45
17-Apr-12,543.70,180.34
16-Apr-12,580.13,210.23
13-Apr-12,605.23,223.45
12-Apr-12,622.77,201.56
11-Apr-12,626.20,212.67
10-Apr-12,628.44,310.45
9-Apr-12,636.23,350.45
5-Apr-12,633.68,410.23
4-Apr-12,624.31,430.56
3-Apr-12,629.32,460.34
2-Apr-12,618.63,510.34
30-Mar-12,599.55,534.23
29-Mar-12,609.86,578.23
28-Mar-12,617.62,590.12
27-Mar-12,614.48,560.34
26-Mar-12,606.98,580.12

// // javascript
// var dataset = [80, 100, 56, 120, 180, 30, 40, 120, 160];

// var svgWidth = 500, svgHeight = 300, barPadding = 5;

// var barWidth = svgWidth / dataset.length;

// var svg = d3.select('svg')
//   .attr("width", svgWidth)
//   .attr("height", svgHeight);

// var xScale = d3.scaleLinear()
//     .domain([0, d3.max(dataset)])
//     .range([0, svgWidth]);
         
// var yScale = d3.scaleLinear()
//     .domain([0, d3.max(dataset)])
//     .range([svgHeight, 0]);

// var barChart = svg.selectAll("rect")
//   .data(dataset)
//   .enter()
//   .append("rect")
//   .attr("y", function (d) {
//     return svgHeight - d
//   })
//   .attr("height", function (d) {
//     return d;
//   })
//   .attr("width", barWidth - barPadding)
//   .attr("class", "bar")
//   .attr("transform", function (d, i) {
//     var translate = [barWidth * i, 0];
//     return "translate(" + translate + ")";
//   });

// var text = svg.selectAll("text")
//   .data(dataset)
//   .enter()
//   .append("text")
//   .text(function (d) {
//     return d;
//   })
//   .attr("y", function (d, i) {
//     return svgHeight - d - 4;
//   })
//   .attr("x", function (d, i) {
//     return barWidth * i;
//   })
//   .attr("fill", "#A64C38");

// javascript

// var data = [80, 100, 56, 120, 180, 30, 40, 120, 160];

// var svgWidth = 500, svgHeight = 300;

// var svg = d3.select('svg')
//   .attr("width", svgWidth)
//   .attr("height", svgHeight);

// var xScale = d3.scaleLinear()
//   .domain([0, d3.max(data)])
//   .range([0, svgWidth]);

// var yScale = d3.scaleLinear()
//   .domain([0, d3.max(data)])
//   .range([svgHeight, 0]);

// var x_axis = d3.axisBottom()
//   .scale(xScale);

// var y_axis = d3.axisLeft()
//   .scale(yScale);

// svg.append("g")
//   .attr("transform", "translate(50, 10)")
//   .call(y_axis);

// var xAxisTranslate = svgHeight - 20;

// svg.append("g")
//   .attr("transform", "translate(50, " + xAxisTranslate + ")")
//   .call(x_axis);

//API to fetch historical data of Bitcoin Price Index
// const api = 'https://api.coindesk.com/v1/bpi/historical/close.json?start=2019-12-31&end=2020-04-01';
// const api = 'https://cloud.iexapis.com/stable/stock/aapl/quote?token=pk_dd5193f164124778a205ed44e317f6d9&format=csv';

// /**
//  * Loading data from API when DOM Content has been loaded'.
//  */
// document.addEventListener("DOMContentLoaded", function (event) {
//   fetch(api)
//     .then(function (response) { return response.json(); })
//     .then(function (data) {
//       var parsedData = parseData(data);
//       drawChart(parsedData);
//     })
//     .catch(function (err) { console.log(err); })
// });

// /**
//  * Parse data into key-value pairs
//  * @param {object} data Object containing historical data of BPI
//  */
// function parseData(data) {
//   var arr = [];
//   for (var i in data.bpi) {
//     arr.push({
//       date: new Date(i), //date
//       value: +data.bpi[i] //convert string to number
//     });
//   }
//   return arr;
// }

// /**
//  * Creates a chart using D3
//  * @param {object} data Object containing historical data of BPI
//  */
// function drawChart(data) {
//   var svgWidth = 600, svgHeight = 400;
//   var margin = { top: 20, right: 20, bottom: 30, left: 50 };
//   var width = svgWidth - margin.left - margin.right;
//   var height = svgHeight - margin.top - margin.bottom;

//   var svg = d3.select('svg')
//     .attr("width", svgWidth)
//     .attr("height", svgHeight);

//   var g = svg.append("g")
//     .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//   // svg.append("g")
//   //   .selectAll("g")
//   //   .data(series)
//   //   .join("g")
//   //   .attr("fill", d => color(d.key))
//   //   .selectAll("rect")
//   //   .data(d => d)
//   //   .join("rect")
//   //   .attr("x", (d, i) => x(d.data.name))
//   //   .attr("y", d => y(d[1]))
//   //   .attr("height", d => y(d[0]) - y(d[1]))
//   //   .attr("width", x.bandwidth())
//   //   .append("title")
//   //   .text(d => `${d.data.name} ${d.key}

//   var x = d3.scaleTime()
//     .rangeRound([0, width]);

//   var y = d3.scaleLinear()
//     .rangeRound([height, 0]);

//   var line = d3.line()
//     .x(function (d) { return x(d.date) })
//     .y(function (d) { return y(d.value) })
//   x.domain(d3.extent(data, function (d) { return d.date }));
//   y.domain(d3.extent(data, function (d) { return d.value }));

//   g.append("g")
//     .attr("transform", "translate(0," + height + ")")
//     .call(d3.axisBottom(x))
//     .select(".domain")
//     .text("Price ($)")
//     // .remove();

//   g.append("g")
//     .call(d3.axisLeft(y))
//     .append("text")
//     .attr("fill", "#4dd34d")
//     .attr("transform", "rotate(-90)")
//     .attr("y", 6)
//     .attr("dy", "0.90em")
//     .attr("text-anchor", "end")
//     .text("Price ($)");

//   g.append("path")
//     .datum(data)
//     .attr("fill", "none")
//     .attr("stroke", "steelblue")
//     .attr("stroke-linejoin", "round")
//     .attr("stroke-linecap", "round")
//     .attr("stroke-width", 1.5)
//     .attr("d", line);
// }

///////////// Dow jones ////////////

// var margin = { top: 20, right: 20, bottom: 30, left: 50 },
//   width = 960 - margin.left - margin.right,
//   height = 500 - margin.top - margin.bottom;

// // parse the date / time
// var parseTime = d3.timeParse("%d-%b-%y");

// // set the ranges
// var x = d3.scaleTime().range([0, width]);
// var y = d3.scaleLinear().range([height, 0]);

// // define the 1st line
// var valueline = d3.line()
//   .x(function (d) { return x(d.date); })
//   .y(function (d) { return y(d.close); });

// // define the 2nd line
// var valueline2 = d3.line()
//   .x(function (d) { return x(d.date); })
//   .y(function (d) { return y(d.open); });

// // append the svg obgect to the body of the page
// // appends a 'group' element to 'svg'
// // moves the 'group' element to the top left 
// var svg = d3.select("body").append("svg")
//   .attr("width", width + margin.left + margin.right)
//   .attr("height", height + margin.top + margin.bottom)
//   .append("g")
//   .attr("transform",
//     "translate(" + margin.left + "," + margin.top + ")");

// // Get the data
// d3.csv("DJI.csv", function (error, data) {
//   if (error) throw error;

//   // format the data
//   data.forEach(function (d) {
//     d.date = parseTime(d.date);
//     d.close = +d.close;
//     d.open = +d.open;
//   });

//   // Scale the range of the data
//   x.domain(d3.extent(data, function (d) { return d.date; }));
//   y.domain([0, d3.max(data, function (d) {
//     return Math.max(d.close, d.open);
//   })]);

//   // Add the valueline path.
//   svg.append("path")
//     .data([data])
//     .attr("class", "line")
//     .attr("d", valueline);

//   // Add the valueline2 path.
//   // svg.append("path")
//   //   .data([data])
//   //   .attr("class", "line")
//   //   .style("stroke", "red")
//   //   .attr("d", valueline2);

//   // Add the X Axis
//   svg.append("g")
//     .attr("transform", "translate(0," + height + ")")
//     .call(d3.axisBottom(x));

//   // Add the Y Axis
//   svg.append("g")
//     .call(d3.axisLeft(y));

// });